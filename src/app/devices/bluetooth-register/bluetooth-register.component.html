<div class="bluetooth-register">
  <div *ngIf="step === 'idle'">
    <button (click)="startBluetooth()" class="btn btn-primary">
      Buscar Dispositivo Bluetooth
    </button>
  </div>
  <div *ngIf="step === 'connecting'">Conectando...</div>
  <div *ngIf="step === 'form'">
    <form (ngSubmit)="saveConfig()">
      <div>
        <label>Nombre del Dispositivo *</label>
        <input [(ngModel)]="deviceName" name="deviceName" required />
      </div>
      <div>
        <label>SSID Wi-Fi *</label>
        <input [(ngModel)]="ssid" name="ssid" required />
      </div>
      <div>
        <label>Contraseña Wi-Fi *</label>
        <input
          [(ngModel)]="password"
          name="password"
          required
          type="password"
        />
      </div>
      <div>
        <label>Descripción</label>
        <input [(ngModel)]="description" name="description" />
      </div>
      <div *ngIf="irMode">
        <button
          type="button"
          (click)="recordSignal('on')"
          [disabled]="recording === 'on'"
          class="btn btn-warning"
        >
          Grabar Señal ON
        </button>
        <button
          type="button"
          (click)="recordSignal('off')"
          [disabled]="recording === 'off'"
          class="btn btn-warning"
        >
          Grabar Señal OFF
        </button>
      </div>
      <button type="submit" class="btn btn-success">
        {{ isAlreadyRegistered ? 'Guardar Configuración Wi-Fi' : 'Guardar Configuración y Registrar' }}
      </button>
    </form>
  </div>
  <div *ngIf="step === 'saving'">Guardando configuración...</div>
  <div *ngIf="step === 'done'">¡Dispositivo registrado correctamente!</div>
  <div *ngIf="error" class="error">{{ error }}</div>
</div>
